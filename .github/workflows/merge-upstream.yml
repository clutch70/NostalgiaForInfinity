name: Scheduled Merge Remote Action
on:
  schedule:
    - cron: '0 0 * * 1'
    # scheduled for 00:00 every Monday
  workflow_dispatch:


jobs:
  merge-upstream:
    runs-on: ubuntu-latest
    name: Sync NFI With Upstream
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          ref: main             # set the branch to merge to

      - name: Merge Upstream
        run: |
          git config --global user.email "b.custard@outlook.com"
          git config --global user.name "clutch70"
          echo Add Remote Upstream
          git remote add upstream "https://github.com/iterativv/NostalgiaForInfinity"
          echo Fetching upstream...
          git fetch upstream main
          echo Pulling main branch --rebase
          git pull upstream "main" --rebase --allow-unrelated-histories
          echo Pushing merge...
          git push origin "main"
          echo Merge completed!!!
      - name: Timestamp
        run: date